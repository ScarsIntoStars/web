package model;

import java.util.*;
import java.sql.*;

public class StuDAO {
	public ArrayList<StuVO> list (int page, String query, String key){
		ArrayList<StuVO> array = new ArrayList<>();
		try {
			String sql = "SELECT * FROM VIEW_STU WHERE " + key + " like ? limit ?,5";
			PreparedStatement ps=Database.CON.prepareStatement(sql);
			ps.setString(1, "%"+ query +"%");
			ps.setInt(2, (page-1)*5);
			ResultSet rs=ps.executeQuery();
			while(rs.next()) {
				StuVO vo= new StuVO();
				vo.setScode(rs.getString("scode"));
				vo.setSname(rs.getString("sname"));
				vo.setDept(rs.getString("dept"));
				vo.setYear(rs.getInt("year"));
				vo.setBirthday(rs.getDate("birthday"));
				vo.setAdvisor(rs.getString("advisor"));
				vo.setPname(rs.getString("pname"));
				array.add(vo);
			}
			
			
		} catch (Exception e) {
			System.out.println("학생목록 오류 : " + e.toString());
		}
		return array;
	}
}
