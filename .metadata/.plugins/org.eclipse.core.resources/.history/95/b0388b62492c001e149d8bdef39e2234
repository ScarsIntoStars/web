package model;

import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class BookDAO {
	public void insert(BookVO vo) {
		try {
			String sql1="SELECT * FROM BOOKS WHERE ISBN=?";
			PreparedStatement ps1=Database.CON.prepareStatement(sql1);
			ps1.setString(1, vo.getIsbn());
			ResultSet rs=ps1.executeQuery();
			
			// 없으면 인서트해라
			if(!rs.next()) {
			String sql = "INSERT INTO BOOKS(ISBN, TITLE, THUMBNAIL, PRICE, AUTHORS, URL, CONTENTS, PUBLISHER)";
			sql+= "values(?,?,?,?,?,?,?,?)";
			PreparedStatement ps = Database.CON.prepareStatement(sql);
			ps.setString(1, vo.getIsbn());
			ps.setString(2, vo.getTitle());
			ps.setString(3, vo.getThumbnail());
			ps.setInt(4, vo.getPrice());
			ps.setString(5, vo.getAuthors());
			ps.setString(6, vo.getUrl());
			ps.setString(7, vo.getContents());
			ps.setString(8, vo.getPublisher());
			ps.execute();
			}
		} catch (Exception e) {
			System.out.println("도서등록 오류" + e.toString());
		}
	}
}
